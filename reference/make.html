<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Run your project (build the outdated targets). — make • drake</title>

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Run your project (build the outdated targets). — make" />

<meta property="og:description" content="This is the central, most important function
of the drake package. It runs all the steps of your
workflow in the correct order, skipping any work
that is already up to date.
See https://github.com/ropensci/drake/blob/master/README.md#documentation
for an overview of the documentation." />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">drake</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">6.1.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/drake.html">Get Started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="https://ropenscilabs.github.io/drake-manual/faq.html">FAQ</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/ropensci/drake">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Run your project (build the outdated targets).</h1>
    <small class="dont-index">Source: <a href='https://github.com/ropensci/drake/blob/master/R/make.R'><code>R/make.R</code></a></small>
    <div class="hidden name"><code>make.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>This is the central, most important function
of the drake package. It runs all the steps of your
workflow in the correct order, skipping any work
that is already up to date.
See <a href='https://github.com/ropensci/drake/blob/master/README.md#documentation'>https://github.com/ropensci/drake/blob/master/README.md#documentation</a>
for an overview of the documentation.</p>
    
    </div>

    <pre class="usage"><span class='fu'>make</span>(<span class='kw'>plan</span> <span class='kw'>=</span> <span class='kw pkg'>drake</span><span class='kw ns'>::</span><span class='fu'><a href='https://www.rdocumentation.org/packages/drake/topics/read_drake_plan'>read_drake_plan</a></span>(), <span class='kw'>targets</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>envir</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/sys.parent'>parent.frame</a></span>(), <span class='kw'>verbose</span> <span class='kw'>=</span> <span class='kw pkg'>drake</span><span class='kw ns'>::</span><span class='fu'><a href='https://www.rdocumentation.org/packages/drake/topics/default_verbose'>default_verbose</a></span>(),
  <span class='kw'>hook</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>cache</span> <span class='kw'>=</span> <span class='kw pkg'>drake</span><span class='kw ns'>::</span><span class='fu'><a href='https://www.rdocumentation.org/packages/drake/topics/get_cache'>get_cache</a></span>(<span class='kw'>verbose</span> <span class='kw'>=</span> <span class='no'>verbose</span>,
  <span class='kw'>console_log_file</span> <span class='kw'>=</span> <span class='no'>console_log_file</span>), <span class='kw'>fetch_cache</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>parallelism</span> <span class='kw'>=</span> <span class='kw pkg'>drake</span><span class='kw ns'>::</span><span class='fu'><a href='https://www.rdocumentation.org/packages/drake/topics/default_parallelism'>default_parallelism</a></span>(), <span class='kw'>jobs</span> <span class='kw'>=</span> <span class='fl'>1</span>,
  <span class='kw'>packages</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/rev'>rev</a></span>(<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/zpackages'>.packages</a></span>()), <span class='kw'>prework</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/character'>character</a></span>(<span class='fl'>0</span>),
  <span class='kw'>prepend</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/character'>character</a></span>(<span class='fl'>0</span>), <span class='kw'>command</span> <span class='kw'>=</span> <span class='kw pkg'>drake</span><span class='kw ns'>::</span><span class='fu'><a href='https://www.rdocumentation.org/packages/drake/topics/default_Makefile_command'>default_Makefile_command</a></span>(),
  <span class='kw'>args</span> <span class='kw'>=</span> <span class='kw pkg'>drake</span><span class='kw ns'>::</span><span class='fu'><a href='https://www.rdocumentation.org/packages/drake/topics/default_Makefile_args'>default_Makefile_args</a></span>(<span class='kw'>jobs</span> <span class='kw'>=</span> <span class='no'>jobs</span>, <span class='kw'>verbose</span> <span class='kw'>=</span> <span class='no'>verbose</span>),
  <span class='kw'>recipe_command</span> <span class='kw'>=</span> <span class='kw pkg'>drake</span><span class='kw ns'>::</span><span class='fu'><a href='https://www.rdocumentation.org/packages/drake/topics/default_recipe_command'>default_recipe_command</a></span>(),
  <span class='kw'>log_progress</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>skip_targets</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>timeout</span> <span class='kw'>=</span> <span class='fl'>Inf</span>,
  <span class='kw'>cpu</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>elapsed</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>retries</span> <span class='kw'>=</span> <span class='fl'>0</span>, <span class='kw'>force</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>return_config</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>graph</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>trigger</span> <span class='kw'>=</span> <span class='kw pkg'>drake</span><span class='kw ns'>::</span><span class='fu'><a href='https://www.rdocumentation.org/packages/drake/topics/trigger'>trigger</a></span>(),
  <span class='kw'>skip_imports</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>skip_safety_checks</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>config</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>lazy_load</span> <span class='kw'>=</span> <span class='st'>"eager"</span>, <span class='kw'>session_info</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>cache_log_file</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>seed</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>caching</span> <span class='kw'>=</span> <span class='st'>"master"</span>, <span class='kw'>keep_going</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>session</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>imports_only</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>pruning_strategy</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>makefile_path</span> <span class='kw'>=</span> <span class='st'>"Makefile"</span>, <span class='kw'>console_log_file</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>ensure_workers</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>garbage_collection</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>template</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/list'>list</a></span>(), <span class='kw'>sleep</span> <span class='kw'>=</span> <span class='kw'>function</span>(<span class='no'>i</span>) <span class='fl'>0.01</span>,
  <span class='kw'>hasty_build</span> <span class='kw'>=</span> <span class='kw pkg'>drake</span><span class='kw ns'>::</span><span class='no'><a href='https://www.rdocumentation.org/packages/drake/topics/default_hasty_build'>default_hasty_build</a></span>,
  <span class='kw'>memory_strategy</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='st'>"speed"</span>, <span class='st'>"memory"</span>, <span class='st'>"lookahead"</span>), <span class='kw'>layout</span> <span class='kw'>=</span> <span class='kw'>NULL</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>plan</th>
      <td><p>workflow plan data frame.
A workflow plan data frame is a data frame
with a <code>target</code> column and a <code>command</code> column.
(See the details in the <code><a href='drake_plan.html'>drake_plan()</a></code> help file
for descriptions of the optional columns.)
Targets are the objects and files that drake generates,
and commands are the pieces of R code that produce them.
Use the function <code><a href='drake_plan.html'>drake_plan()</a></code> to generate workflow plan
data frames easily, and see functions <code><a href='plan_analyses.html'>plan_analyses()</a></code>,
<code><a href='plan_summaries.html'>plan_summaries()</a></code>, <code><a href='evaluate_plan.html'>evaluate_plan()</a></code>,
<code><a href='expand_plan.html'>expand_plan()</a></code>, and <code><a href='gather_plan.html'>gather_plan()</a></code> for
easy ways to generate large workflow plan data frames.</p></td>
    </tr>
    <tr>
      <th>targets</th>
      <td><p>character vector, names of targets to build.
Dependencies are built too. Together, the <code>plan</code> and
<code>targets</code> comprise the workflow network
(i.e. the <code>graph</code> argument).
Changing either will change the network.</p></td>
    </tr>
    <tr>
      <th>envir</th>
      <td><p>environment to use. Defaults to the current
workspace, so you should not need to worry about this
most of the time. A deep copy of <code>envir</code> is made,
so you don't need to worry about your workspace being modified
by <code>make</code>. The deep copy inherits from the global environment.
Wherever necessary, objects and functions are imported
from <code>envir</code> and the global environment and
then reproducibly tracked as dependencies.</p></td>
    </tr>
    <tr>
      <th>verbose</th>
      <td><p>logical or numeric, control printing to the console.
Use <code>pkgconfig</code> to set the default value of <code>verbose</code>
for your R session:
for example, <code><a href='https://www.rdocumentation.org/packages/pkgconfig/topics/set_config'>pkgconfig::set_config("drake::verbose" = 2)</a></code>.</p><ul>
<li><p><code>0</code> or <code>FALSE</code>: print nothing.</p></li>
<li><p><code>1</code> or <code>TRUE</code>: print only targets to build.</p></li>
<li><p><code>2</code>: also print checks and cache info.</p></li>
<li><p><code>3</code>: also print any potentially missing items.</p></li>
<li><p><code>4</code>: also print imports and writes to the cache.</p></li>
</ul></td>
    </tr>
    <tr>
      <th>hook</th>
      <td><p>Deprecated.</p></td>
    </tr>
    <tr>
      <th>cache</th>
      <td><p>drake cache as created by <code><a href='new_cache.html'>new_cache()</a></code>.
See also <code><a href='get_cache.html'>get_cache()</a></code> and <code><a href='this_cache.html'>this_cache()</a></code>.</p></td>
    </tr>
    <tr>
      <th>fetch_cache</th>
      <td><p>character vector containing lines of code.
The purpose of this code is to fetch the <code>storr</code> cache
with a command like <code>storr_rds()</code> or <code>storr_dbi()</code>,
but customized. This feature is experimental. It will turn out
to be necessary if you are using both custom non-RDS caches
and distributed parallelism (<code>parallelism = "future_lapply"</code>
or <code>"Makefile"</code>) because the distributed R sessions
need to know how to load the cache.</p></td>
    </tr>
    <tr>
      <th>parallelism</th>
      <td><p>character, type of parallelism to use.
To list the options, call <code><a href='parallelism_choices.html'>parallelism_choices()</a></code>.
For detailed explanations, see the
<a href='https://ropenscilabs.github.io/drake-manual/hpc.html'>high-performance computing chapter</a>
of the user manual.</p></td>
    </tr>
    <tr>
      <th>jobs</th>
      <td><p>maximum number of parallel workers for processing the targets.
If you wish to parallelize the imports and preprocessing as well, you can
use a named numeric vector of length 2, e.g.
<code>make(jobs = c(imports = 4, targets = 8))</code>.
<code>make(jobs = 4)</code> is equivalent to <code>make(jobs = c(imports = 1, targets = 4))</code>.</p>
<p>Windows users should not set <code>jobs &gt; 1</code> if
<code>parallelism</code> is <code>"mclapply"</code> because
<code>mclapply()</code> is based on forking. Windows users
who use <code>parallelism = "Makefile"</code> will need to
download and install Rtools.</p>
<p>You can experiment with <code><a href='predict_runtime.html'>predict_runtime()</a></code>
to help decide on an appropriate number of jobs.
For details, visit
<a href='https://ropenscilabs.github.io/drake-manual/time.html'>https://ropenscilabs.github.io/drake-manual/time.html</a>.</p></td>
    </tr>
    <tr>
      <th>packages</th>
      <td><p>character vector packages to load, in the order
they should be loaded. Defaults to <code><a href='https://www.rdocumentation.org/packages/base/topics/rev'>rev(.packages())</a></code>, so you
should not usually need to set this manually. Just call
<code><a href='https://www.rdocumentation.org/packages/base/topics/library'>library()</a></code> to load your packages before <code>make()</code>.
However, sometimes packages need to be strictly forced to load
in a certain order, especially if <code>parallelism</code> is
<code>"Makefile"</code>. To do this, do not use <code><a href='https://www.rdocumentation.org/packages/base/topics/library'>library()</a></code>
or <code><a href='https://www.rdocumentation.org/packages/base/topics/library'>require()</a></code> or <code><a href='https://www.rdocumentation.org/packages/base/topics/ns-load'>loadNamespace()</a></code> or
<code><a href='https://www.rdocumentation.org/packages/base/topics/ns-load'>attachNamespace()</a></code> to load any libraries beforehand.
Just list your packages in the <code>packages</code> argument in the order
you want them to be loaded.
If <code>parallelism</code> is <code>"mclapply"</code>,
the necessary packages
are loaded once before any targets are built. If <code>parallelism</code> is
<code>"Makefile"</code>, the necessary packages are loaded once on
initialization and then once again for each target right
before that target is built.</p></td>
    </tr>
    <tr>
      <th>prework</th>
      <td><p>character vector of lines of code to run
before build time. This code can be used to
load packages, set options, etc., although the packages in the
<code>packages</code> argument are loaded before any prework is done.
If <code>parallelism</code> is <code>"mclapply"</code>, the <code>prework</code>
is run once before any targets are built. If <code>parallelism</code> is
<code>"Makefile"</code>, the prework is run once on initialization
and then once again for each target right before that target is built.</p></td>
    </tr>
    <tr>
      <th>prepend</th>
      <td><p>lines to prepend to the Makefile if <code>parallelism</code>
is <code>"Makefile"</code>. See the <a href='https://ropenscilabs.github.io/drake-manual/store.html'>high-performance computing guide</a>
to learn how to use <code>prepend</code>
to distribute work on a cluster.</p></td>
    </tr>
    <tr>
      <th>command</th>
      <td><p>character scalar, command to call the Makefile
generated for distributed computing.
Only applies when <code>parallelism</code> is <code>"Makefile"</code>.
Defaults to the usual <code>"make"</code>
(<code><a href='default_Makefile_command.html'>default_Makefile_command()</a></code>),
but it could also be
<code>"lsmake"</code> on supporting systems, for example.
<code>command</code> and <code>args</code> are executed via
<code><a href='https://www.rdocumentation.org/packages/base/topics/system2'>system2(command, args)</a></code> to run the Makefile.
If <code>args</code> has something like <code>"--jobs=2"</code>, or if
<code>jobs &gt;= 2</code> and <code>args</code> is left alone, targets
will be distributed over independent parallel R sessions
wherever possible.</p></td>
    </tr>
    <tr>
      <th>args</th>
      <td><p>command line arguments to call the Makefile for
distributed computing. For advanced users only. If set,
<code>jobs</code> and <code>verbose</code> are overwritten as they apply to the
Makefile.
<code>command</code> and <code>args</code> are executed via
<code><a href='https://www.rdocumentation.org/packages/base/topics/system2'>system2(command, args)</a></code> to run the Makefile.
If <code>args</code> has something like <code>"--jobs=2"</code>, or if
<code>jobs &gt;= 2</code> and <code>args</code> is left alone, targets
will be distributed over independent parallel R sessions
wherever possible.</p></td>
    </tr>
    <tr>
      <th>recipe_command</th>
      <td><p>Character scalar, command for the
Makefile recipe for each target.</p></td>
    </tr>
    <tr>
      <th>log_progress</th>
      <td><p>logical, whether to log the progress
of individual targets as they are being built. Progress logging
creates a lot of little files in the cache, and it may make builds
a tiny bit slower. So you may see gains in storage efficiency
and speed with
<code>make(..., log_progress = FALSE)</code>. But be warned that
<code><a href='progress.html'>progress()</a></code> and <code><a href='in_progress.html'>in_progress()</a></code>
will no longer work if you do that.</p></td>
    </tr>
    <tr>
      <th>skip_targets</th>
      <td><p>logical, whether to skip building the targets
in <code>plan</code> and just import objects and files.</p></td>
    </tr>
    <tr>
      <th>timeout</th>
      <td><p>Seconds of overall time to allow before imposing
a timeout on a target.
Assign target-level timeout times with an optional <code>timeout</code>
column in <code>plan</code>.</p></td>
    </tr>
    <tr>
      <th>cpu</th>
      <td><p>Seconds of cpu time to allow before imposing
a timeout on a target.
Assign target-level cpu timeout times with an optional <code>cpu</code>
column in <code>plan</code>.</p></td>
    </tr>
    <tr>
      <th>elapsed</th>
      <td><p>Seconds of elapsed time to allow before imposing
a timeout on a target.
Assign target-level elapsed timeout times with an optional <code>elapsed</code>
column in <code>plan</code>.</p></td>
    </tr>
    <tr>
      <th>retries</th>
      <td><p>Number of retries to execute if the target fails.
Assign target-level retries with an optional <code>retries</code>
column in <code>plan</code>.</p></td>
    </tr>
    <tr>
      <th>force</th>
      <td><p>Logical. If <code>FALSE</code> (default) then <code>drake</code> will stop you
if the cache was created with an old
and incompatible version of drake.
This gives you an opportunity to
downgrade <code>drake</code> to a compatible version
rather than rerun all your targets from scratch.
If <code>force</code> is <code>TRUE</code>, then <code>make()</code> executes your workflow
regardless of the version of <code>drake</code> that last ran <code>make()</code> on the cache.</p></td>
    </tr>
    <tr>
      <th>return_config</th>
      <td><p>Logical, whether to return the internal list
of runtime configuration parameters used by <code>make()</code>.
This argument is deprecated. Now, a configuration list
is always invisibly returned.</p></td>
    </tr>
    <tr>
      <th>graph</th>
      <td><p>An <code>igraph</code> object from the previous <code>make()</code>.
Supplying a pre-built graph could save time.</p></td>
    </tr>
    <tr>
      <th>trigger</th>
      <td><p>Name of the trigger to apply to all targets.
Ignored if <code>plan</code> has a <code>trigger</code> column.
See <code><a href='trigger.html'>trigger()</a></code> for details.</p></td>
    </tr>
    <tr>
      <th>skip_imports</th>
      <td><p>logical, whether to totally neglect to
process the imports and jump straight to the targets. This can be useful
if your imports are massive and you just want to test your project,
but it is bad practice for reproducible data analysis.
This argument is overridden if you supply your own <code>graph</code> argument.</p></td>
    </tr>
    <tr>
      <th>skip_safety_checks</th>
      <td><p>logical, whether to skip the safety checks
on your workflow. Use at your own peril.</p></td>
    </tr>
    <tr>
      <th>config</th>
      <td><p>Master configuration list produced by both
<code>make()</code> and <code><a href='drake_config.html'>drake_config()</a></code>.</p></td>
    </tr>
    <tr>
      <th>lazy_load</th>
      <td><p>either a character vector or a logical. Choices:</p><ul>
<li><p><code>"eager"</code>: no lazy loading. The target is loaded right away
with <code><a href='https://www.rdocumentation.org/packages/base/topics/assign'>assign()</a></code>.</p></li>
<li><p><code>"promise"</code>: lazy loading with <code><a href='https://www.rdocumentation.org/packages/base/topics/delayedAssign'>delayedAssign()</a></code></p></li>
<li><p><code>"bind"</code>: lazy loading with active bindings:
<code><a href='https://www.rdocumentation.org/packages/bindr/topics/create_env'>bindr::populate_env()</a></code>.</p></li>
<li><p><code>TRUE</code>: same as <code>"promise"</code>.</p></li>
<li><p><code>FALSE</code>: same as <code>"eager"</code>.</p></li>
</ul>

<p><code>lazy_load</code> should not be <code>"promise"</code>
for <code>"parLapply"</code> parallelism combined with <code>jobs</code> greater than 1.
For local multi-session parallelism and lazy loading, try
<code><a href='https://www.rdocumentation.org/packages/base/topics/library'>library(future); future::plan(multisession)</a></code> and then
<code>make(..., parallelism = "future_lapply", lazy_load = "bind")</code>.</p>
<p>If <code>lazy_load</code> is <code>"eager"</code>,
drake prunes the execution environment before each target/stage,
removing all superfluous targets
and then loading any dependencies it will need for building.
In other words, drake prepares the environment in advance
and tries to be memory efficient.
If <code>lazy_load</code> is <code>"bind"</code> or <code>"promise"</code>, drake assigns
promises to load any dependencies at the last minute.
Lazy loading may be more memory efficient in some use cases, but
it may duplicate the loading of dependencies, costing time.</p></td>
    </tr>
    <tr>
      <th>session_info</th>
      <td><p>logical, whether to save the <code><a href='https://www.rdocumentation.org/packages/utils/topics/sessionInfo'>sessionInfo()</a></code>
to the cache. This behavior is recommended for serious <code>make()</code>s
for the sake of reproducibility. This argument only exists to
speed up tests. Apparently, <code><a href='https://www.rdocumentation.org/packages/utils/topics/sessionInfo'>sessionInfo()</a></code> is a bottleneck
for small <code>make()</code>s.</p></td>
    </tr>
    <tr>
      <th>cache_log_file</th>
      <td><p>Name of the cache log file to write.
If <code>TRUE</code>, the default file name is used (<code>drake_cache.log</code>).
If <code>NULL</code>, no file is written.
If activated, this option uses
<code><a href='drake_cache_log_file.html'>drake_cache_log_file()</a></code> to write a flat text file
to represent the state of the cache
(fingerprints of all the targets and imports).
If you put the log file under version control, your commit history
will give you an easy representation of how your results change
over time as the rest of your project changes. Hopefully,
this is a step in the right direction for data reproducibility.</p></td>
    </tr>
    <tr>
      <th>seed</th>
      <td><p>integer, the root pseudo-random number generator
seed to use for your project.
In <code>make()</code>, <code>drake</code> generates a unique
local seed for each target using the global seed
and the target name. That way, different pseudo-random numbers
are generated for different targets, and this pseudo-randomness
is reproducible.</p>
<p>To ensure reproducibility across different R sessions,
<code><a href='https://www.rdocumentation.org/packages/base/topics/Random'>set.seed()</a></code> and <code>.Random.seed</code> are ignored and have no affect on
<code>drake</code> workflows. Conversely, <code>make()</code> does not usually
change <code>.Random.seed</code>,
even when pseudo-random numbers are generated.
The exceptions to this last point are
<code>make(parallelism = "clustermq")</code> and
<code>make(parallelism = "clustermq_staged")</code>,
because the <code>clustermq</code> package needs to generate random numbers
to set up ports and sockets for ZeroMQ.</p>
<p>On the first call to <code>make()</code> or <code><a href='drake_config.html'>drake_config()</a></code>, <code>drake</code>
uses the random number generator seed from the <code>seed</code> argument.
Here, if the <code>seed</code> is <code>NULL</code> (default), <code>drake</code> uses a <code>seed</code> of <code>0</code>.
On subsequent <code>make()</code>s for existing projects, the project's
cached seed will be used in order to ensure reproducibility.
Thus, the <code>seed</code> argument must either be <code>NULL</code> or the same
seed from the project's cache (usually the <code>.drake/</code> folder).
To reset the random number generator seed for a project,
use <code><a href='clean.html'>clean(destroy = TRUE)</a></code>.</p></td>
    </tr>
    <tr>
      <th>caching</th>
      <td><p>character string, only applies to
<code>"clustermq"</code>, <code>"clustermq_staged"</code>, and <code>"future"</code> parallel backends.
The <code>caching</code> argument can be either <code>"master"</code> or <code>"worker"</code>.</p><ul>
<li><p><code>"master"</code>: Targets are built by remote workers and sent back to
the master process. Then, the master process saves them to the
cache (<code>config$cache</code>, usually a file system <code>storr</code>).
Appropriate if remote workers do not have access to the file system
of the calling R session. Targets are cached one at a time,
which may be slow in some situations.</p></li>
<li><p><code>"worker"</code>: Remote workers not only build the targets, but also
save them to the cache. Here, caching happens in parallel.
However, remote workers need to have access to the file system
of the calling R session. Transferring target data across
a network can be slow.</p></li>
</ul></td>
    </tr>
    <tr>
      <th>keep_going</th>
      <td><p>logical, whether to still keep running <code>make()</code>
if targets fail.</p></td>
    </tr>
    <tr>
      <th>session</th>
      <td><p>An optional <code>callr</code> function if you want to
build all your targets in a separate master session:
for example, <code>make(plan = my_plan, session = callr::r_vanilla)</code>.
Running <code>make()</code> in a clean, isolated
session can enhance reproducibility.
But be warned: if you do this, <code>make()</code> will take longer to start.
If <code>session</code> is <code>NULL</code> (default), then <code>make()</code> will just use
your current R session as the master session. This is slightly faster,
but it causes <code>make()</code> to populate your workspace/environment
with the last few targets it builds.</p></td>
    </tr>
    <tr>
      <th>imports_only</th>
      <td><p>deprecated. Use <code>skip_targets</code> instead.</p></td>
    </tr>
    <tr>
      <th>pruning_strategy</th>
      <td><p>deprecated. See <code>memory_strategy</code>.</p></td>
    </tr>
    <tr>
      <th>makefile_path</th>
      <td><p>Path to the <code>Makefile</code> for
<code>make(parallelism = "Makefile")</code>. If you set this argument to a
non-default value, you are responsible for supplying this same
path to the <code>args</code> argument so <code>make</code> knows where to find it.
Example: <code>make(parallelism = "Makefile", makefile_path = ".drake/.makefile", command = "make", args = "--file=.drake/.makefile")</code></p></td>
    </tr>
    <tr>
      <th>console_log_file</th>
      <td><p>character scalar,
connection object (such as <code><a href='https://www.rdocumentation.org/packages/base/topics/showConnections'>stdout()</a></code>) or <code>NULL</code>.
If <code>NULL</code>, console output will be printed
to the R console using <code><a href='https://www.rdocumentation.org/packages/base/topics/message'>message()</a></code>.
If a character scalar, <code>console_log_file</code>
should be the name of a flat file, and
console output will be appended to that file.
If a connection object (e.g. <code><a href='https://www.rdocumentation.org/packages/base/topics/showConnections'>stdout()</a></code>)
warnings and messages will be sent to the connection.
For example, if <code>console_log_file</code> is <code><a href='https://www.rdocumentation.org/packages/base/topics/showConnections'>stdout()</a></code>,
warnings and messages are printed to the console in real time
(in addition to the usual in-bulk printing
after each target finishes).</p></td>
    </tr>
    <tr>
      <th>ensure_workers</th>
      <td><p>logical, whether the master process
should wait for the workers to post before assigning them
targets. Should usually be <code>TRUE</code>. Set to <code>FALSE</code>
for <code>make(parallelism = "future_lapply", jobs = n)</code>
(<code>n &gt; 1</code>) when combined with <code><a href='https://www.rdocumentation.org/packages/future/topics/plan'>future::plan(future::sequential)</a></code>.
This argument only applies to parallel computing with persistent workers
(<code>make(parallelism = x)</code>, where <code>x</code> could be <code>"mclapply"</code>,
<code>"parLapply"</code>, or <code>"future_lapply"</code>).</p></td>
    </tr>
    <tr>
      <th>garbage_collection</th>
      <td><p>logical, whether to call <code><a href='https://www.rdocumentation.org/packages/base/topics/gc'>gc()</a></code> each time
a target is built during <code>make()</code>.</p></td>
    </tr>
    <tr>
      <th>template</th>
      <td><p>a named list of values to fill in the <code>{{ ... }}</code>
placeholders in template files (e.g. from <code><a href='drake_hpc_template_file.html'>drake_hpc_template_file()</a></code>).
Same as the <code>template</code> argument of <code><a href='https://www.rdocumentation.org/packages/clustermq/topics/Q'>clustermq::Q()</a></code> and
<code><a href='https://www.rdocumentation.org/packages/clustermq/topics/workers'>clustermq::workers</a></code>.
Enabled for <code>clustermq</code> only (<code>make(parallelism = "clustermq_staged")</code>),
not <code>future</code> or <code>batchtools</code> so far.
For more information, see the <code>clustermq</code> package:
<a href='https://github.com/mschubert/clustermq'>https://github.com/mschubert/clustermq</a>.
Some template placeholders such as <code>{{ job_name }}</code> and <code>{{ n_jobs }}</code>
cannot be set this way.</p></td>
    </tr>
    <tr>
      <th>sleep</th>
      <td><p>In its parallel processing, <code>drake</code> uses
a central master process to check what the parallel
workers are doing, and for the affected high-performance
computing workflows, wait for data to arrive over a network.
In between loop iterations, the master process sleeps to avoid throttling.
The <code>sleep</code> argument to <code>make()</code> and <code><a href='drake_config.html'>drake_config()</a></code>
allows you to customize how much time the master process spends
sleeping.</p>
<p>The <code>sleep</code> argument is a function that takes an argument
<code>i</code> and returns a numeric scalar, the number of seconds to
supply to <code><a href='https://www.rdocumentation.org/packages/base/topics/Sys.sleep'>Sys.sleep()</a></code> after iteration <code>i</code> of checking.
(Here, <code>i</code> starts at 1.)
If the checking loop does something other than sleeping
on iteration <code>i</code>, then <code>i</code> is reset back to 1.</p>
<p>To sleep for the same amount of time between checks,
you might supply something like <code>function(i) 0.01</code>.
But to avoid consuming too many resources during heavier
and longer workflows, you might use an exponential
back-off: say,
<code>function(i) { 0.1 + 120 * pexp(i - 1, rate = 0.01) }</code>.</p></td>
    </tr>
    <tr>
      <th>hasty_build</th>
      <td><p>a user-defined function.
In "hasty mode" (<code>make(parallelism = "hasty")</code>)
this is the function that evaluates a target's command
and returns the resulting value. The <code>hasty_build</code> argument
has no effect if <code>parallelism</code> is any value other than "hasty".</p>
<p>The function you pass to <code>hasty_build</code> must have arguments <code>target</code>
and <code>config</code>. Here, <code>target</code> is a character scalar naming the
target being built, and <code>config</code> is a configuration list of
runtime parameters generated by <code><a href='drake_config.html'>drake_config()</a></code>.</p></td>
    </tr>
    <tr>
      <th>memory_strategy</th>
      <td><p>Character scalar, name of the
strategy <code>drake</code> uses to manage targets in memory. For more direct
control over which targets <code>drake</code> keeps in memory, see the
help file examples of <code><a href='drake_envir.html'>drake_envir()</a></code>. The <code>memory_strategy</code> argument
to <code>make()</code> and <code><a href='drake_config.html'>drake_config()</a></code> is an attempt at an automatic
catch-all solution. These are the choices.</p><ul>
<li><p><code>"speed"</code>: Once a target is loaded in memory, just keep it there.
Maximizes speed, but hogs memory.</p></li>
<li><p><code>"memory"</code>: For each target, unload everything from memory
except the target's direct dependencies. Conserves memory,
but sacrifices speed because each new target needs to reload
any previously unloaded targets from the cache.</p></li>
<li><p><code>"lookahead"</code> (default): keep loaded targets in memory until they are
no longer needed as dependencies in downstream build steps.
Then, unload them from the environment. This step avoids
keeping unneeded data in memory and minimizes expensive
reads from the cache. However, it requires looking ahead
in the dependency graph, which could add overhead for every
target of projects with lots of targets.</p></li>
</ul>

<p>Each strategy has a weakness.
<code>"speed"</code> is memory-hungry, <code>"memory"</code> wastes time reloading
targets from storage, and <code>"lookahead"</code> wastes time
traversing the entire dependency graph on every <code>make()</code>. For a better
compromise and more control, see the examples in the help file
of <code><a href='drake_envir.html'>drake_envir()</a></code>.</p></td>
    </tr>
    <tr>
      <th>layout</th>
      <td><p><code>config$layout</code>, where <code>config</code> is the return value
from a prior call to <code><a href='drake_config.html'>drake_config()</a></code>. If your plan or environment
have changed since the last <code>make()</code>, do not supply a <code>layout</code> argument.
Otherwise, supplying one could save time.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>The master internal configuration list, mostly
containing arguments to <code>make()</code> and important objects
constructed along the way. See <code><a href='drake_config.html'>drake_config()</a></code>
for more details.</p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='drake_plan.html'>drake_plan()</a></code>,
<code><a href='drake_config.html'>drake_config()</a></code>,
<code><a href='vis_drake_graph.html'>vis_drake_graph()</a></code>,
<code><a href='evaluate_plan.html'>evaluate_plan()</a></code>,
<code><a href='outdated.html'>outdated()</a></code>,
<code><a href='parallelism_choices.html'>parallelism_choices()</a></code>,
<code><a href='triggers.html'>triggers()</a></code></p></div>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><span class='co'># NOT RUN {</span>
<span class='fu'><a href='test_with_dir.html'>test_with_dir</a></span>(<span class='st'>"Quarantine side effects."</span>, {
<span class='fu'><a href='load_mtcars_example.html'>load_mtcars_example</a></span>() <span class='co'># Get the code with drake_example("mtcars").</span>
<span class='no'>config</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='drake_config.html'>drake_config</a></span>(<span class='no'>my_plan</span>)
<span class='fu'><a href='outdated.html'>outdated</a></span>(<span class='no'>config</span>) <span class='co'># Which targets need to be (re)built?</span>
<span class='fu'>make</span>(<span class='no'>my_plan</span>, <span class='kw'>jobs</span> <span class='kw'>=</span> <span class='fl'>2</span>) <span class='co'># Build what needs to be built.</span>
<span class='fu'><a href='outdated.html'>outdated</a></span>(<span class='no'>config</span>) <span class='co'># Everything is up to date.</span>
<span class='co'># Change one of your imported function dependencies.</span>
<span class='no'>reg2</span> <span class='kw'>=</span> <span class='kw'>function</span>(<span class='no'>d</span>) {
  <span class='no'>d</span>$<span class='no'>x3</span> <span class='kw'>=</span> <span class='no'>d</span>$<span class='no'>x</span>^<span class='fl'>3</span>
  <span class='fu'><a href='https://www.rdocumentation.org/packages/stats/topics/lm'>lm</a></span>(<span class='no'>y</span> ~ <span class='no'>x3</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>d</span>)
}
<span class='fu'><a href='outdated.html'>outdated</a></span>(<span class='no'>config</span>) <span class='co'># Some targets depend on reg2().</span>
<span class='fu'>make</span>(<span class='no'>my_plan</span>) <span class='co'># Rebuild just the outdated targets.</span>
<span class='fu'><a href='outdated.html'>outdated</a></span>(<span class='no'>config</span>) <span class='co'># Everything is up to date again.</span>
<span class='fu'><a href='vis_drake_graph.html'>vis_drake_graph</a></span>(<span class='no'>config</span>) <span class='co'># See how they fit in an interactive graph.</span>
<span class='fu'>make</span>(<span class='no'>my_plan</span>, <span class='kw'>cache_log_file</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>) <span class='co'># Write a text log file this time.</span>
<span class='fu'><a href='vis_drake_graph.html'>vis_drake_graph</a></span>(<span class='no'>config</span>) <span class='co'># The colors changed in the graph.</span>
<span class='fu'><a href='clean.html'>clean</a></span>() <span class='co'># Start from scratch.</span>
<span class='co'># Run with at most 2 jobs at a time for the imports</span>
<span class='co'># and at most 4 jobs at a time for the targets.</span>
<span class='fu'>make</span>(<span class='no'>my_plan</span>, <span class='kw'>jobs</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='kw'>imports</span> <span class='kw'>=</span> <span class='fl'>2</span>, <span class='kw'>targets</span> <span class='kw'>=</span> <span class='fl'>4</span>))
<span class='fu'><a href='clean.html'>clean</a></span>() <span class='co'># Start from scratch.</span>
<span class='co'># Rerun with "Makefile" parallelism with at most 4 jobs.</span>
<span class='co'># Requires Rtools on Windows.</span>
<span class='co'># make(my_plan, parallelism = "Makefile", jobs = 4) # nolint</span>
<span class='fu'><a href='clean.html'>clean</a></span>() <span class='co'># Start from scratch.</span>
<span class='co'># Specify your own Makefile recipe.</span>
<span class='co'># Requires Rtools on Windows.</span>
<span class='co'># make(my_plan, parallelism = "Makefile", jobs = 4, # nolint</span>
<span class='co'>#   recipe_command = "R -q -e") # nolint</span>
<span class='co'>#</span>
<span class='co'># make() respects tidy evaluation as implemented in the rlang package.</span>
<span class='co'># This workflow plan uses rlang's quasiquotation operator `!!`.</span>
<span class='no'>my_plan</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='drake_plan.html'>drake_plan</a></span>(<span class='kw'>list</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(
  <span class='kw'>little_b</span> <span class='kw'>=</span> <span class='st'>"\"b\""</span>,
  <span class='kw'>letter</span> <span class='kw'>=</span> <span class='st'>"!!little_b"</span>
))
<span class='no'>my_plan</span>
<span class='fu'>make</span>(<span class='no'>my_plan</span>)
<span class='fu'><a href='readd.html'>readd</a></span>(<span class='no'>letter</span>) <span class='co'># "b"</span>
})
<span class='co'># }</span></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by William Michael Landau.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.2.0.</p>
</div>
      </footer>
   </div>

  

  </body>
</html>

